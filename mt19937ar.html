<html>
<head>
<title>mt19937ar</title>
<script type="text/javascript" language="javascript" src="mt19937ar.js"></script>

</head>
<body>
<h1>mt19937ar - Mersenne Twister</h1>
<hr>
<div>下記サイトのC言語で書かれた疑似乱数生成機(mt19937ar/Mersenne Twister)をJavaScriptに移植した。(<a href="mt19937ar.js">mt19937ar.js</a>)</div>
<div><a href="http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/mt.html" target="_blank">http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/mt.html</a></div>
<div><a href=" http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/MT2002/mt19937ar.html" target="_blank">http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/MT2002/mt19937ar.html</a></div>
<hr>
<div>出力確認用アウトプット(mt19937ar.out)</div>
<script type="text/javascript" language="javascript"><!--

// 数値(整数)文字列整形
function formatInt(n, val, sp) {
    if (sp) {} else { sp = " "; }
    var t = val.toString();
    while (t.length < n) {
        t = sp + t;
    }
    return t;
}

// 数値(小数)文字列整形
function formatDbl(n, m, val, sp) {
    if (sp) {} else { sp = " "; }
    var k = (val + Math.pow(10, -m - 1) * 5.0).toString();
    var t = k.split(".");
    while (t[0].length < (n - m - 1)) {
        t[0] = sp + t[0];
    }
    while (t[1].length < m) {
        t[1] = t[1] + "0";
    }
    if (t[1].length > m) {
        t[1] = t[1].substring(0, m);
    }
    return (t[0] + "." + t[1]).substring(0, n);
}

// 疑似乱数生成機のテスト

var mt = new MersenneTwister();

var init = new Array(0x123, 0x234, 0x345, 0x456);
var length = 4;
mt.init_by_array(init, length);
var text = "";

text += "1000 outputs of genrand_int32()\n";
for (i=0; i<1000; i++) {
    text += formatInt(10, mt.genrand_int32()) + " ";
    if ((i % 5) == 4) {
        text += "\n";
    }
}

text += "\n1000 outputs of genrand_real2()\n";
for (i=0; i<1000; i++) {
    text += formatDbl(10, 8, mt.genrand_real2()) + " ";
    if ((i % 5) == 4) {
        text += "\n";
    }
}

document.open();
document.writeln('<textarea rows="30" cols="80">' + text + "</textarea>");
document.close();

// --></script>
<hr>
</body>
</html>
